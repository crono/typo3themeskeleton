class Pushbar{constructor(config={overlay:!0,blur:!1}){if(this.activeBar=null,this.overlay=!1,config.overlay&&(this.overlay=document.createElement("div"),this.overlay.classList.add("pushbar_overlay"),document.querySelector("body").appendChild(this.overlay)),config.blur){const mainContent=document.querySelector(".pushbar_main_content");mainContent&&mainContent.classList.add("pushbar_blur")}this.bindEvents()}get opened(){const{activeBar}=this;return!!(activeBar instanceof HTMLElement&&activeBar.classList.contains("opened"))}get activeBarId(){const{activeBar}=this;return activeBar instanceof HTMLElement&&activeBar.getAttribute("data-pushbar-id")}static dispatchOpen(pushbar){const event=new CustomEvent("pushbar_opening",{bubbles:!0,detail:{pushbar}});pushbar.dispatchEvent(event)}static dispatchClose(pushbar){const event=new CustomEvent("pushbar_closing",{bubbles:!0,detail:{pushbar}});pushbar.dispatchEvent(event)}static findElementById(pushbarId){return document.querySelector(`[data-pushbar-id="${pushbarId}"]`)}handleOpenEvent(e){e.preventDefault();const pushbarId=e.currentTarget.getAttribute("data-pushbar-target");pushbarId&&this.open(pushbarId)}handleCloseEvent(e){e.preventDefault(),this.close()}handleKeyEvent(e){this.opened&&27===e.keyCode&&this.close()}bindEvents(){const triggers=document.querySelectorAll("[data-pushbar-target]"),closers=document.querySelectorAll("[data-pushbar-close]");triggers.forEach(trigger=>trigger.addEventListener("click",e=>this.handleOpenEvent(e),!1)),closers.forEach(closer=>closer.addEventListener("click",e=>this.handleCloseEvent(e),!1)),this.overlay&&this.overlay.addEventListener("click",e=>this.handleCloseEvent(e),!1),document.addEventListener("keyup",e=>this.handleKeyEvent(e))}open(pushbarId){if(!(pushbarId+""===this.activeBarId&&this.opened)){const pushbar=Pushbar.findElementById(pushbarId);if(pushbar){this.opened&&this.close(),Pushbar.dispatchOpen(pushbar),pushbar.classList.add("opened");const Root=document.querySelector("html");Root.classList.add("pushbar_locked"),Root.setAttribute("pushbar",pushbarId),this.activeBar=pushbar}}}close(){const{activeBar}=this;if(activeBar){Pushbar.dispatchClose(activeBar),activeBar.classList.remove("opened");const Root=document.querySelector("html");Root.classList.remove("pushbar_locked"),Root.removeAttribute("pushbar"),this.activeBar=null}}}
//# sourceMappingURL=../sourcemaps/Libs/pushbar.min.js.map
